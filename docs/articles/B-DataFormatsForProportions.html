<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Data formats for proportions • ANOPA</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Data formats for proportions">
<meta name="description" content="This vignette describes the various ways that proportions can be entered in a data.frame.
">
<meta property="og:description" content="This vignette describes the various ways that proportions can be entered in a data.frame.
">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ANOPA</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/A-WhatIsANOPA.html">What is an Analysis of Proportions using the Anscombe Transform?</a></li>
    <li><a class="dropdown-item" href="../articles/B-DataFormatsForProportions.html">Data formats for proportions</a></li>
    <li><a class="dropdown-item" href="../articles/C-ConfidenceIntervals.html">Confidence intervals with proportions</a></li>
    <li><a class="dropdown-item" href="../articles/D-ArringtonExample.html">Analyzing proportions with the Arrington et al. 2002 example</a></li>
    <li><a class="dropdown-item" href="../articles/E-ArcsineIsAsinine.html">Is the ArcSine transformation so asinine in the end?</a></li>
    <li><a class="dropdown-item" href="../articles/F-TestingTypeIError.html">Testing type-I error rates</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/dcousin3/ANOPA/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Data formats for proportions</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/dcousin3/ANOPA/blob/HEAD/vignettes/B-DataFormatsForProportions.Rmd" class="external-link"><code>vignettes/B-DataFormatsForProportions.Rmd</code></a></small>
      <div class="d-none name"><code>B-DataFormatsForProportions.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="data-formats-for-proportions">Data formats for proportions<a class="anchor" aria-label="anchor" href="#data-formats-for-proportions"></a>
</h2>
<p>proportions are actually not raw data: they are the proportion of one
response (typically called a <code>success</code>) over all the
responses (the other responses being called collectively a
<code>failure</code>). As such, a proportion is a <em>summary
statistic</em>, a bit like the mean is a summary statistic of continuous
data.</p>
<p>Very often, the <code>success</code> are coded using the digit
<code>1</code> and the <code>failure</code>, with the digit
<code>0</code>. When this is the case, computing the mean is actually
the same as computing the proportion of successes. However, it is a
conceptual mistake to think of proportions as means, because they must
the processed completely differently from averages. For example,
standard error and confidence intervals for proportions are obtained
using very different procedures than standard error and confidence
intervals for the mean.</p>
<p>In this vignette, we review various ways that data can be coded in a
data frame. In a nutshell, there are three ways to represent success or
failures, Wide, Long, and Compiled. The first two shows raw scores
whereas the last shows a summary of the data.</p>
<p>Before we begin, we load the package <code>ANOPA</code> (if is not
present on your computer, first upload it to your computer from CRAN or
from the source repository
<code>devtools::install_github("dcousin3/ANOPA")</code>):</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dcousin3.github.io/ANOPA/">ANOPA</a></span><span class="op">)</span>   </span></code></pre></div>
<div class="section level3">
<h3 id="first-format-wide-data-format">First format: Wide data format<a class="anchor" aria-label="anchor" href="#first-format-wide-data-format"></a>
</h3>
<p>In this format, there is one line per <em>subject</em> and one column
for each measurements. The columns contain only 1s
(<code>success</code>) or 0s (`failure).</p>
<p>If the participant was measured multiple times, there is one (or
some) within-subject factor(s) resulting in multiple columns of
measurements. In between-group design, there is only a single column of
scores.</p>
<p>As an example, consider the following data for a between-subject
factor design with two factors: Class (2 levels) and Difficulty (3
levels) for 6 groups. There is an identical number of participants in
each, 12, for a total of 72 participants.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dataWide1</span></span></code></pre></div>
<pre><code><span><span class="co">##    Class Difficulty success</span></span>
<span><span class="co">## 1  First       Easy       1</span></span>
<span><span class="co">## 2  First       Easy       1</span></span>
<span><span class="co">## 3  First       Easy       1</span></span>
<span><span class="co">## 4  First       Easy       1</span></span>
<span><span class="co">## 5  First       Easy       1</span></span>
<span><span class="co">## 6  First       Easy       1</span></span>
<span><span class="co">## 7  First       Easy       1</span></span>
<span><span class="co">## 8  First       Easy       1</span></span>
<span><span class="co">## 9  First       Easy       1</span></span>
<span><span class="co">## 10 First       Easy       1</span></span>
<span><span class="co">## 11 First       Easy       1</span></span>
<span><span class="co">## 12 First       Easy       0</span></span>
<span><span class="co">## 13 First   Moderate       1</span></span>
<span><span class="co">## 14 First   Moderate       1</span></span>
<span><span class="co">## 15 First   Moderate       1</span></span>
<span><span class="co">## 16 First   Moderate       1</span></span>
<span><span class="co">## 17 First   Moderate       1</span></span>
<span><span class="co">## 18 First   Moderate       1</span></span>
<span><span class="co">## 19 First   Moderate       1</span></span>
<span><span class="co">## 20 First   Moderate       1</span></span>
<span><span class="co">## 21 First   Moderate       1</span></span>
<span><span class="co">## 22 First   Moderate       0</span></span>
<span><span class="co">## 23 First   Moderate       0</span></span>
<span><span class="co">## 24 First   Moderate       0</span></span>
<span><span class="co">## 25 First  Difficult       1</span></span>
<span><span class="co">## 26 First  Difficult       1</span></span>
<span><span class="co">## 27 First  Difficult       1</span></span>
<span><span class="co">## 28 First  Difficult       1</span></span>
<span><span class="co">## 29 First  Difficult       1</span></span>
<span><span class="co">## 30 First  Difficult       1</span></span>
<span><span class="co">## 31 First  Difficult       0</span></span>
<span><span class="co">## 32 First  Difficult       0</span></span>
<span><span class="co">## 33 First  Difficult       0</span></span>
<span><span class="co">## 34 First  Difficult       0</span></span>
<span><span class="co">## 35 First  Difficult       0</span></span>
<span><span class="co">## 36 First  Difficult       0</span></span>
<span><span class="co">## 37  Last       Easy       1</span></span>
<span><span class="co">## 38  Last       Easy       1</span></span>
<span><span class="co">## 39  Last       Easy       1</span></span>
<span><span class="co">## 40  Last       Easy       1</span></span>
<span><span class="co">## 41  Last       Easy       1</span></span>
<span><span class="co">## 42  Last       Easy       1</span></span>
<span><span class="co">## 43  Last       Easy       1</span></span>
<span><span class="co">## 44  Last       Easy       1</span></span>
<span><span class="co">## 45  Last       Easy       1</span></span>
<span><span class="co">## 46  Last       Easy       1</span></span>
<span><span class="co">## 47  Last       Easy       0</span></span>
<span><span class="co">## 48  Last       Easy       0</span></span>
<span><span class="co">## 49  Last   Moderate       1</span></span>
<span><span class="co">## 50  Last   Moderate       1</span></span>
<span><span class="co">## 51  Last   Moderate       1</span></span>
<span><span class="co">## 52  Last   Moderate       1</span></span>
<span><span class="co">## 53  Last   Moderate       1</span></span>
<span><span class="co">## 54  Last   Moderate       1</span></span>
<span><span class="co">## 55  Last   Moderate       1</span></span>
<span><span class="co">## 56  Last   Moderate       1</span></span>
<span><span class="co">## 57  Last   Moderate       0</span></span>
<span><span class="co">## 58  Last   Moderate       0</span></span>
<span><span class="co">## 59  Last   Moderate       0</span></span>
<span><span class="co">## 60  Last   Moderate       0</span></span>
<span><span class="co">## 61  Last  Difficult       1</span></span>
<span><span class="co">## 62  Last  Difficult       1</span></span>
<span><span class="co">## 63  Last  Difficult       1</span></span>
<span><span class="co">## 64  Last  Difficult       0</span></span>
<span><span class="co">## 65  Last  Difficult       0</span></span>
<span><span class="co">## 66  Last  Difficult       0</span></span>
<span><span class="co">## 67  Last  Difficult       0</span></span>
<span><span class="co">## 68  Last  Difficult       0</span></span>
<span><span class="co">## 69  Last  Difficult       0</span></span>
<span><span class="co">## 70  Last  Difficult       0</span></span>
<span><span class="co">## 71  Last  Difficult       0</span></span>
<span><span class="co">## 72  Last  Difficult       0</span></span></code></pre>
<p>When the data are in a wide format, the formula in
<code><a href="../reference/anopa.html">anopa()</a></code> must provide the columns where the success/failure
are stored, and the conditions after the usual ~, as in</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">w1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/anopa.html">anopa</a></span><span class="op">(</span> <span class="va">success</span> <span class="op">~</span> <span class="va">Class</span> <span class="op">*</span> <span class="va">Difficulty</span>, <span class="va">dataWide1</span><span class="op">)</span></span></code></pre></div>
<p>(how dataWide1 was obtained is shown below in the Section
<em>Converting between formats</em> below.)</p>
<p>As another example, consider the following example obtained in a
mixed, within- and between- subject design. It has a factor
<code>Status</code> with 8, 9 and 7 participants per group respectively.
It also has four repeated measures, <code>bpre</code>,
<code>bpost</code>, <code>b1week</code> and <code>b5week</code> which
represent four different Moments of measurements. The data frame is</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dataWide2</span></span></code></pre></div>
<pre><code><span><span class="co">##      Status bpre bpost b1week b5week</span></span>
<span><span class="co">## 1    Broken    1     1      1      0</span></span>
<span><span class="co">## 2    Broken    1     1      0      0</span></span>
<span><span class="co">## 3    Broken    0     0      1      1</span></span>
<span><span class="co">## 4    Broken    1     1      1      1</span></span>
<span><span class="co">## 5    Broken    0     0      1      1</span></span>
<span><span class="co">## 6    Broken    1     0      1      1</span></span>
<span><span class="co">## 7    Broken    1     1      0      1</span></span>
<span><span class="co">## 8    Broken    0     1      1      0</span></span>
<span><span class="co">## 9  Repaired    1     1      0      0</span></span>
<span><span class="co">## 10 Repaired    0     1      0      1</span></span>
<span><span class="co">## 11 Repaired    1     1      0      0</span></span>
<span><span class="co">## 12 Repaired    0     0      1      0</span></span>
<span><span class="co">## 13 Repaired    0     0      0      0</span></span>
<span><span class="co">## 14 Repaired    1     0      0      0</span></span>
<span><span class="co">## 15 Repaired    0     0      0      0</span></span>
<span><span class="co">## 16 Repaired    0     0      0      1</span></span>
<span><span class="co">## 17 Repaired    0     0      1      0</span></span>
<span><span class="co">## 18      New    0     0      0      1</span></span>
<span><span class="co">## 19      New    0     0      1      0</span></span>
<span><span class="co">## 20      New    0     0      0      0</span></span>
<span><span class="co">## 21      New    0     0      1      0</span></span>
<span><span class="co">## 22      New    0     0      0      0</span></span>
<span><span class="co">## 23      New    0     1      0      0</span></span>
<span><span class="co">## 24      New    0     0      1      0</span></span>
<span><span class="co">## 25      New    1     1      0      0</span></span>
<span><span class="co">## 26      New    0     0      0      1</span></span>
<span><span class="co">## 27      New    1     1      1      0</span></span></code></pre>
<p>The formula for analyzing these data in this format is</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">w2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/anopa.html">anopa</a></span><span class="op">(</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="va">bpre</span>, <span class="va">bpost</span>, <span class="va">b1week</span>, <span class="va">b5week</span><span class="op">)</span> <span class="op">~</span> <span class="va">Status</span>, <span class="va">dataWide2</span>, WSFactors <span class="op">=</span> <span class="st">"Moment(4)"</span> <span class="op">)</span></span></code></pre></div>
<p>It is necessary to (a) group all the measurement columns using
<code><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind()</a></code>; (b) indicate the within-subject factor(s) using
the argument <code>WSFactors</code> along with the number of levels each
in a string.</p>
<p>Alternatively, <code><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind()</a></code> can be replaced by
<code>crange()</code> with the first and last variable to be binded. The
in-between variables will be taken from the
<code><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame()</a></code>.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">w2bis</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/anopa.html">anopa</a></span><span class="op">(</span> <span class="fu">crange</span><span class="op">(</span><span class="va">bpre</span>, <span class="va">b5week</span><span class="op">)</span> <span class="op">~</span> <span class="va">Status</span>, <span class="va">dataWide2</span>, WSFactors <span class="op">=</span> <span class="st">"Moment(4)"</span> <span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="second-format-long-data-format">Second format: Long data format<a class="anchor" aria-label="anchor" href="#second-format-long-data-format"></a>
</h3>
<p>This format may be preferred for linear modelers (but it may rapidly
becomes <em>very</em> long!). There is always at least these columns:
One Id column, one column to indicate a within-subject level, and one
column to indicate the observed score. On the other hand, this format
has fewer columns in repeated measure designs.</p>
<p>This example shows the first 6 lines of the 2-factor between design
data above, stored in the long format.</p>
<pre><code><span><span class="co">##   Id Class Difficulty Variable Value</span></span>
<span><span class="co">## 1  1 First       Easy  success     1</span></span>
<span><span class="co">## 2  2 First       Easy  success     1</span></span>
<span><span class="co">## 3  3 First       Easy  success     1</span></span>
<span><span class="co">## 4  4 First       Easy  success     1</span></span>
<span><span class="co">## 5  5 First       Easy  success     1</span></span>
<span><span class="co">## 6  6 First       Easy  success     1</span></span></code></pre>
<p>To analyse such data format within <code><a href="../reference/anopa.html">anopa()</a></code>, use</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">w1Long</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/anopa.html">anopa</a></span><span class="op">(</span> <span class="va">Value</span> <span class="op">~</span> <span class="va">Class</span> <span class="op">*</span> <span class="va">Difficulty</span> <span class="op">*</span> <span class="va">Variable</span>  <span class="op">|</span> <span class="va">Id</span>, <span class="va">dataLong1</span> <span class="op">)</span></span></code></pre></div>
<p>The vertical line symbol indicates that the observations are nested
within <code>Id</code> (i.e., all the lines with the same Id are
actually the same subject).</p>
<p>With the mixed design described above, the data begin as:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">dataLong2</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##   Id Status Variable Value</span></span>
<span><span class="co">## 1  1 Broken     bpre     1</span></span>
<span><span class="co">## 2  1 Broken    bpost     1</span></span>
<span><span class="co">## 3  1 Broken   b1week     1</span></span>
<span><span class="co">## 4  1 Broken   b5week     0</span></span>
<span><span class="co">## 5  2 Broken     bpre     1</span></span>
<span><span class="co">## 6  2 Broken    bpost     1</span></span></code></pre>
<p>and are analyzed with the formula:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">w2Long</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/anopa.html">anopa</a></span><span class="op">(</span> <span class="va">Value</span> <span class="op">~</span> <span class="va">Status</span> <span class="op">*</span> <span class="va">Variable</span>  <span class="op">|</span> <span class="va">Id</span>, <span class="va">dataLong2</span>, WSFactors<span class="op">=</span><span class="st">"Moment(4)"</span> <span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="third-format-compiled-data-format">Third format: Compiled data format<a class="anchor" aria-label="anchor" href="#third-format-compiled-data-format"></a>
</h3>
<p>This format is compiled, in the sense that the 0s and 1s have been
replaced by a single count of success for each cell of the design.
Hence, we no longer have access to the raw data. This format however has
the advantage of being very compact, requiring few lines. Here is the
data for the 2 between-subject factors example</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dataCompiled1</span></span></code></pre></div>
<pre><code><span><span class="co">##   Class Difficulty success Count</span></span>
<span><span class="co">## 1 First  Difficult       6    12</span></span>
<span><span class="co">## 2 First       Easy      11    12</span></span>
<span><span class="co">## 3 First   Moderate       9    12</span></span>
<span><span class="co">## 4  Last  Difficult       3    12</span></span>
<span><span class="co">## 5  Last       Easy      10    12</span></span>
<span><span class="co">## 6  Last   Moderate       8    12</span></span></code></pre>
<p>To use a compiled format in <code><a href="../reference/anopa.html">anopa()</a></code>, use</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">w1Compiled</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/anopa.html">anopa</a></span><span class="op">(</span> <span class="op">{</span><span class="va">success</span>; <span class="va">Count</span><span class="op">}</span> <span class="op">~</span> <span class="va">Class</span> <span class="op">*</span> <span class="va">Difficulty</span>, <span class="va">dataCompiled1</span> <span class="op">)</span></span></code></pre></div>
<p>where <code>succes</code> identifies in which column the total number
of successes are stored. The column Count indicates the total number of
observations in that cell. The notation {s;n} is read
<code>s over n</code> (note the curly braces and semicolon).</p>
<p>For the mixed design presented earlier, the data looks like:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dataCompiled2</span></span></code></pre></div>
<pre><code><span><span class="co">##     Status bpre bpost b1week b5week Count      uAlpha</span></span>
<span><span class="co">## 1   Broken    5     5      6      5     8 -0.15204678</span></span>
<span><span class="co">## 2      New    2     3      4      2    10 -0.03463203</span></span>
<span><span class="co">## 3 Repaired    3     3      2      2     9 -0.10416667</span></span></code></pre>
<p>where there are columns for the number of success for each repeated
measures. A new columns appear <code>uAlpha</code>. This column (called
<em>unitary alpha</em>) is a measure of correlation (between -1 and +1).
In this fictitious example, the correlations are near zero (negative
actually) by chance as the data were generated randomly.</p>
<p>To run an ANOPA on compiled data having repeated measures, use</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">w2Compiled</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/anopa.html">anopa</a></span><span class="op">(</span> <span class="op">{</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="va">bpre</span>, <span class="va">bpost</span>, <span class="va">b1week</span>, <span class="va">b5week</span><span class="op">)</span>; <span class="va">Count</span>; <span class="va">uAlpha</span><span class="op">}</span> <span class="op">~</span> <span class="va">Status</span>, </span>
<span>                    <span class="va">dataCompiled2</span>, WSFactors <span class="op">=</span> <span class="st">"Week(4)"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">w2Compiled</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##                      MS  df        F   pvalue correction    Fcorr pvalcorr</span></span>
<span><span class="co">## Week           0.006472   3 0.221708 0.881375   1.030864 0.215070 0.886009</span></span>
<span><span class="co">## Status         0.174546   2 6.583566 0.001383   1.018673 6.462886 0.001560</span></span>
<span><span class="co">## Week:Status    0.005486   6 0.187927 0.980311   1.445036 0.130050 0.992591</span></span>
<span><span class="co">## Error(within)  0.029192 Inf                                               </span></span>
<span><span class="co">## Error(between) 0.026512 Inf</span></span></code></pre>
<p>where <code><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind()</a></code> lists all the within-subject success count
columns, <em>Count</em> is the column in the data.frame with the total
number of observations, and <em>uAlpha</em> is the column containing the
mean pairwise correlation measured with the unitary alpha.</p>
<p>Here again, <code>crange()</code> can be used in place of
<code><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind()</a></code> with</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">w2Compiledbis</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/anopa.html">anopa</a></span><span class="op">(</span> <span class="op">{</span><span class="fu">crange</span><span class="op">(</span><span class="va">bpre</span>, <span class="va">b5week</span><span class="op">)</span>; <span class="va">Count</span>; <span class="va">uAlpha</span><span class="op">}</span> <span class="op">~</span> <span class="va">Status</span>, </span>
<span>                    <span class="va">dataCompiled2</span>, WSFactors <span class="op">=</span> <span class="st">"Week(4)"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">w2Compiledbis</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##                      MS  df        F   pvalue correction    Fcorr pvalcorr</span></span>
<span><span class="co">## Week           0.006472   3 0.221708 0.881375   1.030864 0.215070 0.886009</span></span>
<span><span class="co">## Status         0.174546   2 6.583566 0.001383   1.018673 6.462886 0.001560</span></span>
<span><span class="co">## Week:Status    0.005486   6 0.187927 0.980311   1.445036 0.130050 0.992591</span></span>
<span><span class="co">## Error(within)  0.029192 Inf                                               </span></span>
<span><span class="co">## Error(between) 0.026512 Inf</span></span></code></pre>
</div>
</div>
<div class="section level2">
<h2 id="converting-between-formats">Converting between formats<a class="anchor" aria-label="anchor" href="#converting-between-formats"></a>
</h2>
<p>Once entered in an <code><a href="../reference/anopa.html">anopa()</a></code> structure, it is possible to
convert to any format using <code><a href="../reference/conversion.html">toWide()</a></code>,
<code><a href="../reference/conversion.html">toCompiled()</a></code> and <code><a href="../reference/conversion.html">toLong()</a></code>. For example:</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/conversion.html">toCompiled</a></span><span class="op">(</span><span class="va">w1</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##   Class Difficulty success Count</span></span>
<span><span class="co">## 1 First  Difficult       6    12</span></span>
<span><span class="co">## 2 First       Easy      11    12</span></span>
<span><span class="co">## 3 First   Moderate       9    12</span></span>
<span><span class="co">## 4  Last  Difficult       3    12</span></span>
<span><span class="co">## 5  Last       Easy      10    12</span></span>
<span><span class="co">## 6  Last   Moderate       8    12</span></span></code></pre>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/conversion.html">toCompiled</a></span><span class="op">(</span><span class="va">w2</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##     Status bpre bpost b1week b5week Count      uAlpha</span></span>
<span><span class="co">## 1   Broken    5     5      6      5     8 -0.15204678</span></span>
<span><span class="co">## 2      New    2     3      4      2    10 -0.03463203</span></span>
<span><span class="co">## 3 Repaired    3     3      2      2     9 -0.10416667</span></span></code></pre>
<p>The compiled format is probably the most compact format, but the wide
format is the most explicit format (as we see all the subjects and their
scores on a single line, one subject per line).</p>
</div>
<div class="section level2">
<h2 id="getting-the-example-data-frame">Getting the example data frame<a class="anchor" aria-label="anchor" href="#getting-the-example-data-frame"></a>
</h2>
<p>Above, we used two examples. They are available in this package under
the names <code>twoWayExample</code> and <code>minimalMxExample</code>.
The first is available in compiled form, the second in wide form.</p>
<p>We converted these data set in other formats using:</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">w1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/anopa.html">anopa</a></span><span class="op">(</span> <span class="op">{</span><span class="va">success</span>;<span class="va">total</span><span class="op">}</span> <span class="op">~</span> <span class="va">Class</span> <span class="op">*</span> <span class="va">Difficulty</span>, <span class="va">twoWayExample</span><span class="op">)</span></span>
<span><span class="va">dataWide1</span>     <span class="op">&lt;-</span> <span class="fu"><a href="../reference/conversion.html">toWide</a></span><span class="op">(</span><span class="va">w1</span><span class="op">)</span></span>
<span><span class="va">dataCompiled1</span> <span class="op">&lt;-</span><span class="fu"><a href="../reference/conversion.html">toCompiled</a></span><span class="op">(</span><span class="va">w1</span><span class="op">)</span></span>
<span><span class="va">dataLong1</span>     <span class="op">&lt;-</span> <span class="fu"><a href="../reference/conversion.html">toLong</a></span><span class="op">(</span><span class="va">w1</span><span class="op">)</span></span>
<span></span>
<span><span class="va">w2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/anopa.html">anopa</a></span><span class="op">(</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="va">bpre</span>, <span class="va">bpost</span>, <span class="va">b1week</span>, <span class="va">b5week</span><span class="op">)</span> <span class="op">~</span> <span class="va">Status</span>, <span class="va">minimalMxExample</span>, WSFactors <span class="op">=</span> <span class="st">"Moment(4)"</span><span class="op">)</span></span>
<span><span class="va">dataWide2</span>     <span class="op">&lt;-</span> <span class="fu"><a href="../reference/conversion.html">toWide</a></span><span class="op">(</span><span class="va">w2</span><span class="op">)</span></span>
<span><span class="va">dataCompiled2</span> <span class="op">&lt;-</span><span class="fu"><a href="../reference/conversion.html">toCompiled</a></span><span class="op">(</span><span class="va">w2</span><span class="op">)</span></span>
<span><span class="va">dataLong2</span>     <span class="op">&lt;-</span> <span class="fu"><a href="../reference/conversion.html">toLong</a></span><span class="op">(</span><span class="va">w2</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="multiple-repeated-measure-factors">Multiple repeated-measure factors<a class="anchor" aria-label="anchor" href="#multiple-repeated-measure-factors"></a>
</h2>
<p>One limitation is with regards to repeated measures: It is not
possible to guess the name of the within-subject factors from the names
of the columns. This is why, as soon as there are more than one
measurement, the argument <code>WSFactors</code> must be added.</p>
<p>Suppose a two-way within-subject design with 2 x 3 levels. The data
set <code>twoWayWithinExample</code> has 6 columns; the first three are
for the factor A, level 1, and the last three are for factor A, level 2.
Within each triplet of column, the factor B goes from 1 to 3.</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">w3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/anopa.html">anopa</a></span><span class="op">(</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="va">r11</span>,<span class="va">r12</span>,<span class="va">r13</span>,<span class="va">r21</span>,<span class="va">r22</span>,<span class="va">r23</span><span class="op">)</span> <span class="op">~</span> <span class="va">.</span> , </span>
<span>             <span class="va">twoWayWithinExample</span>, </span>
<span>             WSFactors <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"B(3)"</span>,<span class="st">"A(2)"</span><span class="op">)</span> </span>
<span>            <span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## ANOPA::fyi: Here is how the within-subject variables are understood:</span></span></code></pre>
<pre><code><span><span class="co">##  B A Variable</span></span>
<span><span class="co">##  1 1      r11</span></span>
<span><span class="co">##  2 1      r12</span></span>
<span><span class="co">##  3 1      r13</span></span>
<span><span class="co">##  1 2      r21</span></span>
<span><span class="co">##  2 2      r22</span></span>
<span><span class="co">##  3 2      r23</span></span></code></pre>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/conversion.html">toCompiled</a></span><span class="op">(</span><span class="va">w3</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##   r11 r12 r13 r21 r22 r23 Count     uAlpha</span></span>
<span><span class="co">## 1  14   6   8  14  16  14    30 0.08223684</span></span></code></pre>
<p>A “fyi” message is shown which lets you see how the variables are
interpreted. Take the time to verify that the order of the variables
within <code><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind()</a></code> does match the expected order from
<code><a href="../reference/anopa.html">anopa()</a></code>. Note that FYI messages can be inhibited by
changing the option</p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span><span class="st">"ANOPA.feedback"</span> <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span></span></code></pre></div>
<p>To know more about analyzing proportions with ANOPA, refer to <span class="citation">Laurencelle &amp; Cousineau (2023)</span> or to <a href="../articles/A-WhatIsANOPA.html">What is an ANOPA?</a>.</p>
</div>
<div class="section level2">
<h2 class="unnumbered" id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references csl-bib-body hanging-indent" entry-spacing="0" line-spacing="2">
<div id="ref-lc23" class="csl-entry">
Laurencelle, L., &amp; Cousineau, D. (2023). Analysis of proportions
using arcsine transform with any experimental design. <em>Frontiers in
Psychology</em>, <em>13</em>, 1045436. <a href="https://doi.org/10.3389/fpsyg.2022.1045436" class="external-link">https://doi.org/10.3389/fpsyg.2022.1045436</a>
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Denis Cousineau, Louis Laurencelle.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
